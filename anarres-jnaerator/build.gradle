/*
 * This file was generated by the Gradle 'init' task.
 */

buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
        jcenter()
        gradlePluginPortal()
    }

    dependencies {
        classpath 'org.anarres.gradle:gradle-velocity-plugin:1.0.10-SNAPSHOT'
        classpath 'org.apache.velocity:velocity:1.7'
        classpath ("org.apache.velocity:velocity-tools:2.0") {
            exclude group: 'log4j', module: 'log4j'
            exclude group: 'logkit', module: 'logkit'
            exclude group: 'avalon-framework', module: 'avalon-framework'
            exclude group: 'javax.servlet', module: 'servlet-api'
        }
    }
}

plugins {
    id 'application'
    id 'maven-publish'
}

import java.util.stream.Collectors

application {
    mainClassName = "org.anarres.cpp.Main"
}

tasks.build.dependsOn gradle.includedBuild('gradle-velocity-plugin').task(':publishToMavenLocal')
project.logger.debug("Project output: ${gradle.includedBuild('gradle-velocity-plugin').projectDir}/build/libs")

dependencies {
    compileOnly 'org.apache.ant:ant:1.8.2'

    implementation 'gnu.getopt:java-getopt:1.0.13'
    implementation 'commons-collections:commons-collections:3.2.1'

    testImplementation 'junit:junit:4.12'
}

group = 'com.nativelibs4java'
version = '1.2.10-SNAPSHOT'
description = 'Anarres JCPP (with JNAerator modifications)'

sourceCompatibility = '1.5'
targetCompatibility = '1.8'

apply plugin: 'org.anarres.velocity'

velocity {
    context {
        put('version', "$version")
    }
}

compileJava.sourceCompatibility = '1.5'
compileJava.targetCompatibility = '1.8'

tasks.register('testsJar', Jar) {
    archiveClassifier = 'tests'
    from(sourceSets.test.output)
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}
